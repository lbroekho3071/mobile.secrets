<Project Sdk="Microsoft.NET.Sdk">
    <UsingTask
            TaskName="SecretTask"
            AssemblyFile="$([System.IO.Path]::Combine('bin', $(Configuration), netstandard2.1, Mobile.Secrets.dll))"/>

    <Target Name="Secret"
            BeforeTargets="CoreCompile;_CoreXamlG;XamlG;XamlC;Build">
        <SecretTask
                SettingsPath="$([System.IO.Path]::Combine($(SolutionDir), $(AssemblyName), 'appsettings.json'))"
                OutputPath="$(IntermediateOutputPath)">
            <Output ItemName="FilesWrite"
                    TaskParameter="GeneratedFiles"/>
            <Output ItemName="Compile"
                    TaskParameter="GeneratedFiles"/>
        </SecretTask>
    </Target>
    
        <Target Name="RunCustomTarget" AfterTargets="Build">
        <Message Text="I have successfully finished generating all secrets" Importance="high" />
    </Target>
</Project>
